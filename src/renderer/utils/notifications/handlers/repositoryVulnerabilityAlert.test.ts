import { createMockSubject } from '../../../__mocks__/notifications-mocks';
import type { Link } from '../../../types';
import type { Notification } from '../../../typesGitHub';
import { repositoryVulnerabilityAlertHandler } from './repositoryVulnerabilityAlert';

describe('renderer/utils/notifications/handlers/repositoryVulnerabilityAlert.ts', () => {
  it('iconType', () => {
    expect(
      repositoryVulnerabilityAlertHandler.iconType(
        createMockSubject({
          type: 'RepositoryVulnerabilityAlert',
        }),
      ).displayName,
    ).toBe('AlertIcon');
  });

  it('defaultUrl', () => {
    const mockHtmlUrl =
      'https://github.com/gitify-app/notifications-test' as Link;

    expect(
      repositoryVulnerabilityAlertHandler.defaultUrl({
        repository: {
          html_url: mockHtmlUrl,
        },
      } as Notification),
    ).toEqual(mockHtmlUrl);
  });
});
