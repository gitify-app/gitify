#import './common.graphql'

query FetchIssueByNumber(
  $ownerINDEX: String!
  $nameINDEX: String!
  $numberINDEX: Int!
  $lastComments: Int
  $firstLabels: Int
) {
  ...IssueMergeQuery
}
fragment IssueMergeQuery on Query {
  nodeINDEX: repository(owner: $ownerINDEX, name: $nameINDEX) {
    issue(number: $numberINDEX) {
      ...IssueDetails
    }
  }
}

fragment IssueDetails on Issue {
  __typename
  number
  title
  url
  state
  stateReason
  milestone {
    ...MilestoneFields
  }
  author {
    ...AuthorFields
  }
  comments(last: $lastComments) {
    totalCount
    nodes {
      url
      author {
        ...AuthorFields
      }
    }
  }
  labels(first: $firstLabels) {
    nodes {
      name
    }
  }
}
